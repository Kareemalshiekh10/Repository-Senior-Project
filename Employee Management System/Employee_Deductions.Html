<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Employee Management System</title>
  <link rel="stylesheet" href="./css/Employee_Deductions.css">
  
  <link rel="stylesheet" href="./css/Sidebar.css">
</head>

<body>
  <!------------------------------------------------------------------------ sidebar starts------------------------------------------------------------------------ -->
  <div class="sidebar">
    <div class="user-profile">
      <div class="centered">
        <img src="./img/download.png" alt="User's Profile Picture" class="profile-picture">
        <p class="user-name">Employee's Name</p>
      </div>
    </div>
    <div class="menu-links">
      <a href="#" class="dropdown-trigger">Employees</a>
      <div class="dropdown-content">
        <a href="./View_employee.html">View Employee</a>
        <a href="./Add_employee.html">Add Employee</a>
        <a href="./Edit_employee.html">Edit Employee</a>
        <!-- Add more dropdown links as needed -->
      </div>
      <a href="#" class="dropdown-trigger">Department</a>
      <div class="dropdown-content">
        <a href="./View_department.html">View Department</a>
        <a href="./Add_department.html">Add Department</a>
        <a href="./Edit_department.html">Edit Department</a>
        <!-- Add more links as needed -->
      </div>
      <a href="#" class="dropdown-trigger">Loans</a>
      <div class="dropdown-content">
        <a href="./View_loans.html">View Loans</a>
        <a href="./Add_loans.html">Add Loans</a>
        <!-- Add more dropdown links as needed -->
      </div>
      <a href="#" class="dropdown-trigger">Incentives</a>
      <div class="dropdown-content">
        <a href="./View_Incentives.html">View Incentives</a>
        <a href="./Add_incentives.html">Add Incentives</a>

        <!-- Add more dropdown links as needed -->
      </div>
    </div>
  </div>
  <!------------------------------------------------------------------------ sidebar ends------------------------------------------------------------------------ -->

<!--------------------------------------------------------------------------Employee Deductions------------------------------------------------------------------------>
  <div class="content">

    <section>
        <h2>Employee Deductions Table</h2>
        <button onclick="addDeductions()">Add Deductions</button>
        <table id="salaryTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Department</th>
                    <th>Position</th>
                    <th>Salary</th>
                    <th>Deductions</th>
                    <th>Salary After Dedections</th>
                    <th>Action</th> <!-- New column for delete buttons -->
                </tr>
            </thead>
            <tbody id="deductionsTableBody">
                <tr>
                <tr data-id="1">
                    <td>1</td>
                    <td>John Doe</td>
                    <td>IT</td>
                    <td>Developer</td>
                    <td  class="salaryValue">3000$</td>
                    <td  class="deductionValue">1000$</td>
                    <td  class="afterDeductionValue"></td>
                    <td><button onclick="deleteEmployee(1)">Delete</button> <button
                            onclick="editEmployee(1)">Edit</button></td>
                </tr>
                </tr>
                <tr>
                <tr data-id="2">
                    <td>2</td>
                    <td>Jane Smith</td>
                    <td>HR</td>
                    <td>Manager</td>
                    <td class="salaryValue">5000$</td>
                    <td class="deductionValue">1000$</td>
                    <td class="afterDeductionValue"></td>
                    <td><button onclick="deleteEmployee(2)">Delete</button> <button
                            onclick="editEmployee(2)">Edit</button></td>
                </tr>
                </tr>
                <tr>
                <tr data-id="3">
                    <td>3</td>
                    <td>Bob Johnson</td>
                    <td>Finance</td>
                    <td>Accountant</td>
                    <td class="salaryValue">2000$</td>
                    <td class="deductionValue">1000$</td>
                    <td class="afterDeductionValue"></td>
                    <td><button onclick="deleteEmployee(3)">Delete</button> <button
                            onclick="editEmployee(3)">Edit</button></td>
                </tr>
                </tr>
                <!-- Add more rows as needed -->
            </tbody>
        </table>
    </section>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>

<script src="./js/Employee Deductions.js"></script>

<script>
$(document).ready(function() {
  // Function to calculate after deduction on page load
  calculateAfterDeduction();

  // Function to calculate after deduction for each row on page load
  function calculateAfterDeduction() {

    $('#salaryTable tbody tr').each(function() {
      calculateAfterDeductionForRow($(this));
    });
  }

  // Function to calculate after deduction for a specific row
  function calculateAfterDeductionForRow(row) {
    var salaryText = row.find('.salaryValue').text().replace('$', ''); // Remove dollar sign
    var deductionText = row.find('.deductionValue').text().replace('$', ''); // Remove dollar sign

    var salary = salaryText;
    var deduction = deductionText;
    
    var afterDeduction = salary - deduction;
    row.find('.afterDeductionValue').text(afterDeduction+"$");
  }

});

</script>


</body>

</html>